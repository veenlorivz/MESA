<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=\, initial-scale=1.0">
  <link rel="icon" href="assets/img/mesa_logo.png" type="image/png"  />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="./assets/css/style.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
  <title>MESA</title>
</head>
<body>
  <div class="main__container">
    <div class="logo">
      <img src="./assets/img/mesa_logo_500.png" alt="" class="header__img">
    </div>
    <div class="content">
      <div class="stepper">
        <div class="step active">
          <div class="step-circle">1</div>
          <div class="step-label">Identitas</div>
          <div class="step-line"></div>
        </div>
        <div class="step">
          <div class="step-circle">2</div>
          <div class="step-label">Makanan</div>
          <div class="step-line"></div>
        </div>
        <div class="step">
          <div class="step-circle">3</div>
          <div class="step-label">Hasil</div>
        </div>
      </div>
      <div id="stepContent" class="step-content active"></div>
    </div>
  </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
<script src="data/contents.js"></script>
<script>
    const steps = document.querySelectorAll('.step');
    const stepContent = document.getElementById('stepContent');
    let currentStep = 0;

    // Function to update content based on the current step
    function updateContent() {
      stepContent.innerHTML = contents[currentStep]; // Set the inner HTML to the current step content
      console.log(currentStep)

      
      // Add the "Next" or "Refresh" button dynamically
      if (currentStep < steps.length - 1) {
          stepContent.innerHTML += `<button type="button" class="btn btn-primary w-100 mb-3 mt-3" id="step2Button">Selanjutnya</button>`;
          $(document).ready(function() {
          $('#mySelect').select2({
                placeholder: "Pilih Makanan",
                allowClear: true,
                width: '100%'
            });
          });
          document.getElementById('step2Button').addEventListener('click', () => {
              steps[currentStep].classList.remove('active');
              currentStep++;
              steps[currentStep].classList.add('active');
              updateContent();
          });
      } else {
        stepContent.innerHTML += `<button type="button" class="btn btn-primary w-100 mb-3" id="refreshBtn">Kembali</button>`;
            document.getElementById('refreshBtn').addEventListener('click', () => {
                location.reload(); // Refresh the page
            });
      }

      // Show the current step content
      document.querySelectorAll('.step-content').forEach(sc => sc.classList.remove('active'));
      stepContent.classList.add('active');
    }

    // Initialize content for the first step
    updateContent();

    document.getElementById('nextBtn').addEventListener('click', () => {
        if (currentStep < steps.length - 1) {
            steps[currentStep].classList.remove('active');
            currentStep++;
            steps[currentStep].classList.add('active');
            updateContent();
        }
    });
</script>
</html>